{% extends "base.html" %} 
{% load static %}
{% block extra_head %}
<title>Mi Perfil - Pawly</title>
<style>
  .gradient-bg {
    background: linear-gradient(135deg, #ffffff 0%, #e8f8f5 50%, #f0fdfa 100%);
  }
  .card-shadow {
    box-shadow: 0 4px 20px rgba(152, 228, 214, 0.1);
  }
  .hover-lift {
    transition: all 0.3s ease;
  }
  .hover-lift:hover {
    transform: translateY(-2px);
    box-shadow: 0 8px 30px rgba(152, 228, 214, 0.15);
  }
  .turquoise-gradient {
    background: linear-gradient(135deg, #40e0d0 0%, #98e4d6 100%);
  }
  .input-focus {
    transition: all 0.3s ease;
  }
  .input-focus:focus {
    border-color: #40e0d0;
    box-shadow: 0 0 0 3px rgba(64, 224, 208, 0.1);
  }
  .tab-active {
    background: linear-gradient(135deg, #40e0d0 0%, #98e4d6 100%);
    color: white;
  }
  .tab-inactive {
    background: white;
    color: #6b7280;
    border: 1px solid #e5e7eb;
  }
  .tab-inactive:hover {
    background: #e8f8f5;
    color: #40e0d0;
  }
</style>
{% endblock extra_head %} 
{% block content %}
<div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
  <!-- Profile Header -->
  <div class="bg-white rounded-2xl card-shadow p-8 mb-8">
    <div
      class="flex flex-col md:flex-row items-center md:items-start space-y-6 md:space-y-0 md:space-x-8"
    >
      <!-- Avatar -->
      <div class="relative">
        <div
          class="w-32 h-32 turquoise-gradient rounded-full flex items-center justify-center text-white text-4xl font-bold shadow-lg"
        >
          M
        </div>
        <button
          class="absolute bottom-2 right-2 bg-white rounded-full p-2 shadow-md hover:shadow-lg transition-all"
        >
          <i class="fas fa-camera text-turquoise"></i>
        </button>
      </div>

      <!-- User Info -->
      <div class="flex-1 text-center md:text-left">
        <h1 class="text-3xl font-bold text-gray-800 mb-4">{{ usuario.user.first_name }} {{ usuario.user.last_name }}</h1>
        <div
          class="flex flex-wrap justify-center md:justify-start gap-4 text-sm"
        >
          <div class="flex items-center space-x-2">
            <i class="fas fa-heart text-red-500"></i>
            <span class="text-gray-600">{{ adoptados }} adopciones exitosas</span>
          </div>
          <div class="flex items-center space-x-2">
            <i class="fas fa-paw text-turquoise"></i>
            <span class="text-gray-600">{{ disponibles }} mascotas en adopción</span>
          </div>
        </div>
      </div>

      <!-- Quick Actions -->
      <div class="flex flex-col space-y-3">
        <a href="#">
          <button
            class="turquoise-gradient text-white px-6 py-3 rounded-xl font-semibold hover:shadow-lg transition-all hover-lift"
          >
            <i class="fas fa-plus mr-2"></i>
            Agregar Mascota
          </button>
        </a>
      </div>
    </div>
  </div>

  <!-- Tabs Navigation -->
  <div class="flex flex-wrap gap-2 mb-8">
    <a href="{% url 'posts_user' %}">
    <button
      id="postsTab"
      class="{% if request.path == 'posts_user' %}tab-active{% else %}tab-inactive{% endif %} px-6 py-3 rounded-xl font-semibold transition-all"
    >
      <i class="fas fa-newspaper mr-2"></i>
      Mis Publicaciones
    </button>
    </a>
    <a href="{% url 'perfil' %}">
    <button
      id="profileTab"
      class="{% if request.path == 'perfil' %}tab-active{% else %}tab-inactive{% endif %} px-6 py-3 rounded-xl font-semibold transition-all"
    >
      <i class="fas fa-user mr-2"></i>
      Datos Personales
    </button>
    </a>
    <a href="{% url 'pets_user' %}">
    <button
      id="petsTab"
      class="{% if request.path == 'pets_user' %}tab-active{% else %}tab-inactive{% endif %} px-6 py-3 rounded-xl font-semibold transition-all"
    >
      <i class="fas fa-paw mr-2"></i>
      Mis Mascotas
    </button>
    </a>
    <a href="{% url 'configuracion' %}">
    <button
      id="settingsTab"
      class="{% if request.path == 'configuracion' %}tab-active{% else %}tab-inactive{% endif %} px-6 py-3 rounded-xl font-semibold transition-all"
    >
      <i class="fas fa-cog mr-2"></i>
      Configuración
    </button>
    </a>
    
  </div>
</div>
{% if messages %}
<div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
  {% for message in messages %}
    <div class="mb-4 p-4 rounded-lg {% if message.tags == 'error' %}bg-red-100 text-red-800{% elif message.tags == 'success' %}bg-green-100 text-green-800{% else %}bg-blue-100 text-blue-800{% endif %} shadow-md">
      {{ message }}
    </div>
  {% endfor %}
</div>  
{% endif %}
{% block content_profile %}
 {% endblock content_profile %} 
 {% endblock content%} 
{% block extra_scripts %}
<script>
  // Tab switching functionality
  function switchTab(tabName) {
    // Hide all tab contents
    const contents = document.querySelectorAll(".tab-content");
    contents.forEach((content) => content.classList.add("hidden"));

    // Remove active class from all tabs
    const tabs = document.querySelectorAll('[id$="Tab"]');
    tabs.forEach((tab) => {
      tab.classList.remove("tab-active");
      tab.classList.add("tab-inactive");
    });

    // Show selected tab content
    document.getElementById(tabName + "Content").classList.remove("hidden");

    // Add active class to selected tab
    const activeTab = document.getElementById(tabName + "Tab");
    activeTab.classList.remove("tab-inactive");
    activeTab.classList.add("tab-active");
  }

  // Pet management
  function showAddPetModal() {
    document.getElementById("addPetModal").classList.remove("hidden");
  }

  function closeAddPetModal() {
    document.getElementById("addPetModal").classList.add("hidden");
    document.getElementById("addPetForm").reset();
  }


  function closeEditPetModal() {
    document.getElementById("editPetModal").classList.add("hidden");
  }

  function showPublishModal(petId) {
    const petNames = {
      max: "Max",
      luna: "Luna",
    };
    document.getElementById("publishPetName").textContent =
      petNames[petId] || "tu mascota";
    document.getElementById("publishModal").classList.remove("hidden");
  }

  function closePublishModal() {
    document.getElementById("publishModal").classList.add("hidden");
    document.getElementById("publishForm").reset();
  }

  // Form submission
  document
    .getElementById("addPetForm")
    .addEventListener("submit", function (e) {
      e.preventDefault();
      alert(
        "¡Mascota agregada exitosamente! Se publicará después de la revisión."
      );
      closeAddPetModal();
    });

    document
    
  // Close modal when clicking outside
  document
    .getElementById("addPetModal")
    .addEventListener("click", function (e) {
      if (e.target === this) {
        closeAddPetModal();
      }
    });

  document
    .getElementById("editPetModal")
    .addEventListener("click", function (e) {
      if (e.target === this) {
        closeEditPetModal();
      }
    });

  document
    .getElementById("publishModal")
    .addEventListener("click", function (e) {
      if (e.target === this) {
        closePublishModal();
      }
    });
</script>
<script>
  (function () {
    function c() {
      var b = a.contentDocument || a.contentWindow.document;
      if (b) {
        var d = b.createElement("script");
        d.innerHTML =
          "window.__CF$cv$params={r:'981a3f23a44e8f20',t:'MTc1ODI5NzEwOS4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";
        b.getElementsByTagName("head")[0].appendChild(d);
      }
    }
    if (document.body) {
      var a = document.createElement("iframe");
      a.height = 1;
      a.width = 1;
      a.style.position = "absolute";
      a.style.top = 0;
      a.style.left = 0;
      a.style.border = "none";
      a.style.visibility = "hidden";
      document.body.appendChild(a);
      if ("loading" !== document.readyState) c();
      else if (window.addEventListener)
        document.addEventListener("DOMContentLoaded", c);
      else {
        var e = document.onreadystatechange || function () {};
        document.onreadystatechange = function (b) {
          e(b);
          "loading" !== document.readyState &&
            ((document.onreadystatechange = e), c());
        };
      }
    }
  })();
</script>
{% endblock extra_scripts %}
